(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{16:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),c=n(7),r=n.n(c),i=(n(6),n(10)),s=n(2),u=n(0);var l=function(){return Object(u.jsx)("footer",{className:"footer",children:Object(u.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})},p=n.p+"static/media/logo.c2821b38.svg";var d=function(){return Object(u.jsx)("header",{className:"header",children:Object(u.jsx)("img",{src:p,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",className:"header__logo"})})},j=a.a.createContext();var _=function(e){var t=Object(o.useContext)(j),n=e.card.owner._id===t._id,a="photos__delete-button ".concat(!n&&"photos__delete-button_inactive"),c=e.card.likes.some((function(e){return e._id===t._id})),r="photos__like-button ".concat(c&&"photos__like-button_active");return Object(u.jsxs)("div",{className:"photos__card",children:[Object(u.jsx)("img",{src:e.card.link,alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f",className:"photos__illustration",onClick:function(){e.onCardClick(e.card)}}),Object(u.jsx)("button",{className:a,type:"button",onClick:function(){e.onCardDelete(e.card)}}),Object(u.jsxs)("div",{className:"photos__wrap",children:[Object(u.jsx)("h2",{className:"photos__title",children:e.card.name}),Object(u.jsxs)("div",{className:"photos__like-wrap",children:[Object(u.jsx)("button",{className:r,type:"button",onClick:function(){e.onCardLike(e.card)}}),Object(u.jsx)("p",{className:"photos__like-counter",children:e.card.likes.length})]})]})]})};var h=function(e){var t=Object(o.useContext)(j);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("main",{className:"content",children:[Object(u.jsxs)("section",{className:"profile",children:[Object(u.jsxs)("div",{className:"profile__avatar-overlay",children:[Object(u.jsx)("img",{src:t.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440",className:"profile__avatar"}),Object(u.jsx)("div",{className:"profile__button-overlay",children:Object(u.jsx)("button",{type:"button",className:"profile__avatar-button",onClick:e.onEditAvatar})})]}),Object(u.jsxs)("div",{className:"profile__info",children:[Object(u.jsxs)("div",{className:"profile__wrap",children:[Object(u.jsx)("h1",{className:"profile__title",children:t.name}),Object(u.jsx)("button",{className:"profile__edit-button",type:"button",onClick:e.onEditProfile})]}),Object(u.jsx)("p",{className:"profile__subtitle",children:t.about})]}),Object(u.jsx)("button",{className:"profile__add-button",type:"button",onClick:e.onAddPlace})]}),Object(u.jsx)("section",{className:"photos",children:e.cards.map((function(t){return Object(u.jsx)(_,{card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})]})})};var b=function(e){return Object(u.jsx)("div",{className:"popup popup_".concat(e.name," ").concat(!!e.isOpen&&"popup_opened"),children:Object(u.jsxs)("div",{className:"popup__container popup__container_image",children:[Object(u.jsx)("button",{className:"popup__close popup__close_image",onClick:e.onClose}),Object(u.jsx)("img",{src:e.card.link,alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f",className:"popup__illustration"}),Object(u.jsx)("p",{className:"popup__description",children:e.card.name})]})})};var f=function(e){return Object(u.jsx)("div",{className:"popup popup_".concat(e.name," ").concat(!!e.isOpen&&"popup_opened"),children:Object(u.jsxs)("div",{className:"popup__container popup__container_".concat(e.name),children:[Object(u.jsx)("button",{className:"popup__close popup__close_".concat(e.name),type:"button",onClick:e.onClose}),Object(u.jsx)("h2",{className:"popup__title popup__title_".concat(e.name),children:e.title}),Object(u.jsxs)("form",{className:"popup__form popup__form_".concat(e.name),name:e.name,method:"GET",onSubmit:e.onSubmit,noValidate:!0,children:[e.children,Object(u.jsx)("button",{className:"popup__save-button popup__save-button_".concat(e.name),type:"submit",children:e.buttonText})]})]})})};var m=function(e){var t=Object(o.useContext)(j);Object(o.useEffect)((function(){r(t.name),d(t.about)}),[t]);var n=Object(o.useState)(),a=Object(s.a)(n,2),c=a[0],r=a[1],i=Object(o.useState)(),l=Object(s.a)(i,2),p=l[0],d=l[1];return Object(u.jsx)(f,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:e.isOpen,onClose:e.onClose,buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:c,profession:p})},children:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("input",{type:"text",id:"name",minLength:"2",maxLength:"40",value:c||"",onChange:function(e){r(e.target.value)},required:!0,name:"name",autoComplete:"off",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f",className:"popup__input popup__input_type_name"}),Object(u.jsx)("span",{id:"name-error",className:"popup__error"}),Object(u.jsx)("input",{type:"text",id:"profession",minLength:"2",maxLength:"200",value:p||"",onChange:function(e){d(e.target.value)},required:!0,name:"profession",autoComplete:"off",placeholder:"\u0427\u0435\u043c \u0432\u044b \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442\u0435\u0441\u044c?",className:"popup__input popup__input_type_profession"}),Object(u.jsx)("span",{id:"profession-error",className:"popup__error"})]})})};var O=function(e){var t=Object(o.useRef)();return Object(u.jsx)(f,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:e.isOpen,onClose:e.onClose,buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})},children:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("input",{ref:t,type:"url",id:"avatar-url",required:!0,name:"avatar",autoComplete:"off",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",className:"popup__input popup__input_type_url"}),Object(u.jsx)("span",{id:"avatar-url-error",className:"popup__error"})]})})};var v=function(e){var t=Object(o.useState)(""),n=Object(s.a)(t,2),a=n[0],c=n[1],r=Object(o.useState)(""),i=Object(s.a)(r,2),l=i[0],p=i[1];return Object(u.jsx)(f,{name:"card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:a,link:l})},buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",children:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("input",{type:"text",id:"title",minLength:"2",maxLength:"30",value:a,required:!0,name:"name",onChange:function(e){c(e.target.value)},autoComplete:"off",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"popup__input popup__input_type_title"}),Object(u.jsx)("span",{id:"title-error",className:"popup__error"}),Object(u.jsx)("input",{type:"url",id:"url",value:l,required:!0,name:"link",onChange:function(e){p(e.target.value)},autoComplete:"off",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__input popup__input_type_url"}),Object(u.jsx)("span",{id:"url-error",className:"popup__error"})]})})},x=n(8),g=n(9),C=new(function(){function e(t){Object(x.a)(this,e),this._url=t.url,this._token=t.token}return Object(g.a)(e,[{key:"_getOriginalResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status," ").concat(e.statusText))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._token}}).then((function(t){return e._getOriginalResponse(t)}))}},{key:"getProfileInfo",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:{authorization:this._token}}).then((function(t){return e._getOriginalResponse(t)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._getOriginalResponse(e)}))}},{key:"editProfile",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.profession})}).then((function(e){return t._getOriginalResponse(e)}))}},{key:"editProfileAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e.avatar})}).then((function(e){return t._getOriginalResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(e){return t._getOriginalResponse(e)}))}},{key:"likeCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(e){return t._getOriginalResponse(e)}))}},{key:"unlikeCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(e){return t._getOriginalResponse(e)}))}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-19",token:"cdc2b984-82a4-4b35-acbd-93038325fc29"});var k=function(){var e=Object(o.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)(!1),r=Object(s.a)(c,2),p=r[0],_=r[1],f=Object(o.useState)(!1),x=Object(s.a)(f,2),g=x[0],k=x[1],N=Object(o.useState)(!1),y=Object(s.a)(N,2),E=y[0],S=y[1],T=Object(o.useState)({}),P=Object(s.a)(T,2),L=P[0],A=P[1],R=Object(o.useState)({}),D=Object(s.a)(R,2),z=D[0],F=D[1],w=Object(o.useState)([]),U=Object(s.a)(w,2),I=U[0],q=U[1];function J(){a(!1),_(!1),k(!1),S(!1),A({})}return Object(o.useEffect)((function(){C.getProfileInfo().then((function(e){F(e)})).catch((function(e){console.log("Error: ".concat(e))}))}),[]),Object(o.useEffect)((function(){C.getInitialCards().then((function(e){q(e)})).catch((function(e){console.log("Error: ".concat(e))}))}),[]),Object(u.jsx)("div",{className:"page",children:Object(u.jsx)("div",{className:"page__container",children:Object(u.jsxs)(j.Provider,{value:z,children:[Object(u.jsx)(d,{}),Object(u.jsx)(h,{onEditProfile:function(){a(!0)},onAddPlace:function(){_(!0)},onEditAvatar:function(){k(!0)},onCardClick:function(e){A(e),S(!0)},cards:I,onCardLike:function(e){(e.likes.some((function(e){return e._id===z._id}))?C.unlikeCard(e._id):C.likeCard(e._id)).then((function(e){var t=I.map((function(t){return t._id===e._id?e:t}));q(t)})).catch((function(e){return console.log("Error: ".concat(e))}))},onCardDelete:function(e){C.deleteCard(e._id).then((function(t){var n=I.filter((function(t){return t._id!==e._id}));q(n)})).catch((function(e){return console.log("Error: ".concat(e))}))}}),Object(u.jsx)(l,{}),Object(u.jsx)(m,{isOpen:n,onClose:J,onUpdateUser:function(e){C.editProfile(e).then((function(e){F(e),J()})).catch((function(e){return console.log("Error: ".concat(e))}))}}),Object(u.jsx)(v,{isOpen:p,onClose:J,onAddPlace:function(e){C.addCard(e).then((function(e){q([e].concat(Object(i.a)(I))),J()})).catch((function(e){return console.log("Error: ".concat(e))}))}}),Object(u.jsx)(O,{isOpen:g,onClose:J,onUpdateAvatar:function(e){C.editProfileAvatar(e).then((function(e){F(e),J()})).catch((function(e){return console.log("Error: ".concat(e))}))}}),Object(u.jsx)(b,{name:"image",isOpen:E,onClose:J,card:L})]})})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),o(e),a(e),c(e),r(e)}))};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root")),N()},6:function(e,t,n){}},[[16,1,2]]]);
//# sourceMappingURL=main.7f76efb4.chunk.js.map